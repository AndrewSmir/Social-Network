{"version":3,"sources":["assets/img/user.jpeg","redux/dialogs-reducer.js","components/nav/Friends/Friends.module.css","assets/img/Spinner-1s-200px.svg","api/api.js","components/header/img/logo.png","components/nav/Nav.module.css","serviceWorker.js","components/nav/Nav.jsx","components/settings/Settings.jsx","components/news/News.jsx","redux/users-reducer.js","components/Users/Users.jsx","redux/user-selectors.js","components/Users/UsersContainer.jsx","components/header/Header.jsx","redux/auth-reducer.js","components/header/HeaderContainer.jsx","components/Login/LoginForm.jsx","components/Login/Login.jsx","redux/app-reducer.js","redux/sidebar-reducer.js","redux/redux-store.js","App.js","index.js","components/common/Preloader/Preloader.jsx","components/common/FormsControl/FormsControl.module.css","utils/validators/validators.js","components/Users/Users.module.css","components/header/Header.module.css","components/common/FormsControl/FormsControls.jsx","redux/profile-reducer.js"],"names":["module","exports","initialState","dialogsData","id","name","imgSrc","messagesData","message","dialogsReducer","state","action","type","stateCopy","newMessage","newMessageText","push","addMessageActionCreator","instance","axios","baseURL","withCredentials","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","followUser","userId","post","unfollowUser","delete","loginAPI","login","signIn","loginData","email","password","rememberMe","logout","profileAPI","setProfile","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","Boolean","window","location","hostname","match","Nav","props","className","styles","nav","item","activeClassName","activeLink","to","Settings","News","users","totalUsersCount","isFetching","followingInProgress","usersReducer","map","user","userID","followed","count","filter","changeFollow","toggleFollowingProgress","Users","useState","curPage","setCurPage","useEffect","pagesCount","Math","ceil","pages","i","page","slice","selectedPage","key","onClick","setPage","userItem","usersPage","src","photos","small","userPhoto","disabled","some","setPreviousPage","setNextPage","getIsFetching","getPageSize","getTotalUsersCount","getCurrentPage","getFollowingInProgress","UsersContainer","pageNumber","setCurrentPage","this","Preloader","React","Component","compose","connect","dispatch","a","userAPI","items","totalCount","getUsersTC","resultCode","alert","followUserTC","unfollowUserTC","Header","header","require","alt","loginBlock","auth","isAuth","authReducer","payload","setUserData","getAuthUserDataTC","HeaderContainer","maxLength30","maxLength","reduxForm","form","onSubmit","handleSubmit","Field","placeholder","component","Input","validate","requiredField","typeField","error","formSummaryError","messages","length","stopSubmit","_error","signInTC","initialized","initiateState","sidebarReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reducersButch","combineReducers","dialogsPage","profilePage","profileReducer","sideBar","formReducer","appReducer","store","createStore","applyMiddleware","thunk","Window","prototype","DialogsContainer","lazy","ProfileContainer","App","initializeApp","Suspense","fallback","path","render","ComposedApp","promise","Promise","all","MainApp","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console","preloader","value","FormControl","input","meta","hasError","touched","formControl","children","Textarea","restProps","ADD_POST","DELETE_POST","postData","likes","profile","profileStatus","newPost","newPostText","postId","addPostActionCreator","setUserProfileStatus","setProfileTC","getProfileStatusTC","updateProfileStatusTC","savePhotoTC","file"],"mappings":"2FAAAA,EAAOC,QAAU,IAA0B,mC,sFCErCC,EAAe,CACjBC,YAAa,CACT,CACIC,GAAI,IACJC,KAAM,SACNC,OAAQ,gFAEZ,CACIF,GAAI,IACJC,KAAM,uCACNC,OAAQ,0EAEZ,CAACF,GAAI,IAAKC,KAAM,6CAAWC,OAAQ,iCACnC,CAACF,GAAI,IAAKC,KAAM,iCAASC,OAAQ,uDAGrCC,aAAc,CACV,CAACH,GAAI,IAAKI,QAAS,MACnB,CAACJ,GAAI,IAAKI,QAAS,kBACnB,CAACJ,GAAI,IAAKI,QAAS,YACnB,CAACJ,GAAI,IAAKI,QAAS,oCAyBZC,IAnBQ,WAAmC,IAAlCC,EAAiC,uDAAzBR,EAAcS,EAAW,uCACrD,OAAQA,EAAOC,MAEX,IA/BY,cAgCR,IAAMC,EAAS,eAAOH,GAEhBI,EAAa,CACfV,GAAI,KAAMI,QAASG,EAAOI,gBAI9B,OAFAF,EAAUN,aAAV,YAA6BG,EAAMH,cACnCM,EAAUN,aAAaS,KAAKF,GACrBD,EAGX,QACI,OAAOH,IAKZ,IAAMO,EAA0B,SAACF,GAAD,MAAqB,CAACH,KAhDzC,cAgD4DG,oB,oBC/ChFf,EAAOC,QAAU,CAAC,OAAS,0B,oBCD3BD,EAAOC,QAAU,IAA0B,8C,kHCA3C,mHAIMiB,EAAWC,SAAa,CAC1BC,QAAS,gDACTC,iBAAiB,EACjBC,QAAS,CACL,UAAU,0CAQLC,EAAW,CACnBC,SADmB,SACVC,EAAaC,GACnB,OAAOR,EAASS,IAAT,qBAA2BF,EAA3B,kBAAgDC,IAClDE,MAAK,SAAAC,GACN,OAAOA,EAASC,SAGxBC,WAPoB,SAOTC,GACP,OAAOd,EAASe,KAAT,iBAAwBD,IAC1BJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAGnCI,aAZoB,SAYPF,GACT,OAAOd,EAASiB,OAAT,iBAA0BH,IAC5BJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAK1BM,EAAW,CACpBC,MADoB,WAEhB,OAAOnB,EAASS,IAAT,WACFC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAGnCQ,OANoB,SAMbC,GACH,OAAOrB,EAASe,KAAK,cAAe,CAACO,MAAOD,EAAUC,MAAOC,SAAUF,EAAUE,SAAUC,WAAYH,EAAUG,aAC5Gd,MAAK,SAAAC,GAAQ,OAAEA,EAASC,SAGjCa,OAXoB,WAYhB,OAAOzB,EAASiB,OAAO,eAClBP,MAAK,SAAAC,GAAQ,OAAEA,EAASC,UAIxBc,EAAa,CACtBC,WADsB,SACXb,GACP,OAAOd,EAASS,IAAT,kBAAwBK,IAC1BJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAEnCgB,UALsB,SAKZd,GACN,OAAOd,EAASS,IAAT,yBAA+BK,IACjCJ,MAAK,SAAAC,GAAQ,OAAEA,EAASC,SAEjCiB,aATsB,SASTC,GACT,OAAO9B,EAAS+B,IAAT,iBAA+B,CAACD,OAAQA,IAC1CpB,MAAK,SAAAC,GAAQ,OAAEA,EAASC,SAEjCoB,UAbsB,SAaZC,GACN,IAAIC,EAAW,IAAIC,SAEnB,OADAD,EAASE,OAAO,QAASH,GAClBjC,EAAS+B,IAAI,gBAAiBG,EAAU,CAC3C9B,QAAS,CACL,eAAgB,4B,oBCtEhCtB,EAAOC,QAAU,IAA0B,kC,mBCC3CD,EAAOC,QAAU,CAAC,IAAM,iBAAiB,KAAO,kBAAkB,WAAa,wBAAwB,QAAU,uB,wCCW7FsD,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,uHCKSC,MAlBf,SAAaC,GAET,OAAQ,yBAAKC,UAAWC,IAAOC,KAC3B,4BACI,wBAAIF,UAAWC,IAAOE,MAAM,kBAAC,IAAD,CAASC,gBAAiBH,IAAOI,WAAYC,GAAG,YAAhD,YAC5B,wBAAIN,UAAWC,IAAOE,MAAM,kBAAC,IAAD,CAASC,gBAAiBH,IAAOI,WAAYC,GAAG,YAAhD,YAC5B,wBAAIN,UAAWC,IAAOE,MAAM,kBAAC,IAAD,CAASC,gBAAiBH,IAAOI,WAAYC,GAAG,UAAhD,UAC5B,wBAAIN,UAAWC,IAAOE,MAAM,kBAAC,IAAD,CAASC,gBAAiBH,IAAOI,WAAYC,GAAG,SAAhD,SAC5B,wBAAIN,UAAWC,IAAOE,MAAM,kBAAC,IAAD,CAASC,gBAAiBH,IAAOI,WAAYC,GAAG,aAAhD,gBCLzBC,EANE,WACb,OACI,0CCKOC,EANF,WACT,OACI,sC,uDCMFpE,EAAe,CACjBqE,MAAO,GACP7C,SAAU,EACV8C,gBAAiB,KACjB/C,YAAa,EACbgD,YAAY,EACZC,oBAAqB,IA8DVC,EA1DM,WAAmC,IAAlCjE,EAAiC,uDAAzBR,EAAcS,EAAW,uCACnD,OAAQA,EAAOC,MACX,IArBc,gBAsBV,OAAO,2BACAF,GADP,IAEI6D,MAAO7D,EAAM6D,MAAMK,KAAI,SAAAC,GAAI,OAAIA,EAAKzE,KAAOO,EAAOmE,OAAnB,2BAAgCD,GAAhC,IAAsCE,UAAWF,EAAKE,WAAYF,OAKzG,IA5BU,YA6BN,OAAO,2BACAnE,GADP,IAEI6D,MAAM,YAAK5D,EAAO4D,SAG1B,IAjCiB,mBAkCb,OAAO,2BACA7D,GADP,IACce,YAAad,EAAOc,cAGtC,IApCkB,oBAqCd,OAA0B,IAAtBf,EAAMe,YACC,2BACAf,GADP,IACce,YAAaf,EAAMe,YAAc,IAGxCf,EAGf,IA5Cc,gBA6CV,OAAO,2BACAA,GADP,IACce,YAAaf,EAAMe,YAAc,IAGnD,IAnDsB,wBAoDlB,OAAO,2BACAf,GADP,IACc8D,gBAAiB7D,EAAOqE,QAG1C,IArDmB,qBAsDf,OAAO,2BACAtE,GADP,IACc+D,YAAa/D,EAAM+D,aAGrC,IAzDoB,sBA0DhB,OAAO,2BACA/D,GADP,IAEIgE,oBAAqB/D,EAAO8D,WAAP,sBACb/D,EAAMgE,qBADO,CACc/D,EAAOqB,SACtCtB,EAAMgE,oBAAoBO,QAAO,SAAA7E,GAAE,OAAIA,GAAMO,EAAOqB,YAGhE,QACI,OAAOtB,IAONwE,EAAe,SAACJ,GAAD,MAAa,CAAClE,KAhFpB,gBAgFyCkE,WAOlDK,EAA0B,SAACV,EAAYzC,GAChD,MAAO,CACHpB,KAlFoB,sBAkFO6D,aAAYzC,W,oDCVhCoD,EA3ED,SAACvB,GAAW,IAAD,EAESwB,mBAAS,GAFlB,mBAEdC,EAFc,KAELC,EAFK,KAIrBC,qBAAU,WACF3B,EAAMpC,aAAa,IACnB8D,EAAW1B,EAAMpC,YAAcoC,EAAMpC,YAAY,MAEtD,CAACoC,EAAMpC,cAKV,IAFA,IAAMgE,EAAaC,KAAKC,KAAK9B,EAAMW,gBAAkBX,EAAMnC,UACrDkE,EAAQ,GACLC,EAAI,EAAGA,GAAKJ,EAAYI,IAC7BD,EAAM5E,KAAK6E,GAGf,IAAMC,EAAOF,EAAMG,MAAMT,EAAU,EAAGA,EAAU,IAAIV,KAAI,SAAAkB,GACpD,OAAO,0BAAMhC,UAAWD,EAAMpC,cAAgBqE,EAAO/B,IAAOiC,aAAe,KAAM5F,GAAI0F,EAAMG,IAAKH,EACnFI,QAAS,kBAAMrC,EAAMsC,QAAQL,KAAQA,MAIhDM,EAAWvC,EAAMwC,UAAUzB,KAAI,SAAAC,GAAI,OACrC,yBAAKoB,IAAKpB,EAAKzE,IACX,6BACA,8BACI,6BACI,kBAAC,IAAD,CAASgE,GAAE,mBAAcS,EAAKzE,KAC9B,yBAAKkG,IAAKzB,EAAK0B,OAAOC,MAAQ3B,EAAK0B,OAAOC,MAAQC,IAAW3C,UAAWC,IAAO0C,cAGnF,6BACG,4BAAQC,SAAU7C,EAAMa,oBAAoBiC,MAAK,SAAAvG,GAAE,OAAIA,IAAOyE,EAAKzE,MAC3D8F,QAAS,WACArB,EAAKE,SAECF,EAAKE,UACZlB,EAAM3B,aAAa2C,EAAKzE,IAFxByD,EAAM9B,WAAW8C,EAAKzE,KAK9BA,GAAIyE,EAAKzE,IACXyE,EAAKE,UAAY,YACjBF,EAAKE,UAAY,YAI1B,8BACI,6BAAMF,EAAKxE,MACX,6BAAMwE,EAAK7B,SAEf,8BACI,6BAAM,yBACN,oCAMhB,OACI,6BACI,yBAAKc,UAAWC,IAAO6B,OACnB,6BAC0B,IAArB/B,EAAMpC,aAAoB,0BAAMyE,QAAS,kBAAMrC,EAAM+C,oBAA3B,iBAC1B/C,EAAMpC,aAAc,IAAM,MAC1BqE,EAHL,OAMA,0BAAMI,QAAS,kBAAMrC,EAAMgD,gBAA3B,cAEHT,I,eC1EAU,G,OAAgB,SAACpG,GAC1B,OAAOA,EAAM2F,UAAU5B,aAGdjD,EAAW,SAACd,GACrB,OAAOA,EAAM2F,UAAU9B,OASdwC,EAAc,SAACrG,GACxB,OAAOA,EAAM2F,UAAU3E,UAGdsF,EAAqB,SAACtG,GAC/B,OAAOA,EAAM2F,UAAU7B,iBAGdyC,EAAiB,SAACvG,GAC3B,OAAOA,EAAM2F,UAAU5E,aAGdyF,EAAyB,SAACxG,GACnC,OAAOA,EAAM2F,UAAU3B,qBCVrByC,E,4MAiBFhB,QAAU,SAACiB,GACP,EAAKvD,MAAMwD,eAAeD,GAC1B,EAAKvD,MAAMrC,SAAS4F,EAAY,EAAKvD,MAAMnC,W,EAG/CmF,YAAc,WACV,EAAKhD,MAAMgD,cACX,EAAKhD,MAAMrC,SAAS,EAAKqC,MAAMpC,YAAc,EAAG,EAAKoC,MAAMnC,W,EAG/DkF,gBAAkB,WACd,EAAK/C,MAAM+C,kBACX,EAAK/C,MAAMrC,SAAS,EAAKqC,MAAMpC,YAAc,EAAG,EAAKoC,MAAMnC,W,kEA3B3D4F,KAAKzD,MAAMrC,SAAS8F,KAAKzD,MAAMpC,YAAa6F,KAAKzD,MAAMnC,Y,+BA+BvD,OAAO,oCACF4F,KAAKzD,MAAMY,WAAa,kBAAC8C,EAAA,EAAD,MACrB,kBAAC,EAAD,CAAO/C,gBAAiB8C,KAAKzD,MAAMW,gBAC5B9C,SAAU4F,KAAKzD,MAAMnC,SACrByE,QAASmB,KAAKnB,QACdE,UAAWiB,KAAKzD,MAAMwC,UACtB5E,YAAa6F,KAAKzD,MAAMpC,YACxBoF,YAAaS,KAAKT,YAClBD,gBAAiBU,KAAKV,gBACtBlC,oBAAqB4C,KAAKzD,MAAMa,oBAChC3C,WAAYuF,KAAKzD,MAAM9B,WACvBG,aAAcoF,KAAKzD,MAAM3B,oB,GA5CnBsF,IAAMC,WAqGpBC,cACXC,aAvCoB,SAACjH,GACrB,MAAO,CACH2F,UAAW7E,EAASd,GACpBgB,SAAUqF,EAAYrG,GACtB8D,gBAAiBwC,EAAmBtG,GACpCe,YAAawF,EAAevG,GAC5B+D,WAAYqC,EAAcpG,GAC1BgE,oBAAqBwC,EAAuBxG,OAIzB,SAAAkH,GACvB,MAAO,CAEHP,eAAgB,SAAC5F,GACbmG,EHbkB,SAACnG,GAAD,MAAkB,CAACb,KAhFxB,mBAgFgDa,eGapD4F,CAAe5F,KAE5BoF,YAAa,WACTe,EHZsB,CAAChH,KAjFb,mBG+FdgG,gBAAiB,WACbgB,EHhB0B,CAAChH,KAjFb,uBGoGlBY,SAAU,SAACC,EAAaC,GACpBkG,EHVc,SAACnG,EAAaC,GACpC,8CAAO,WAAOkG,GAAP,eAAAC,EAAA,6DACHD,EAb+B,CAAChH,KA9Eb,uBA0FhB,SAEoBkH,IAAQtG,SAASC,EAAaC,GAFlD,OAEGG,EAFH,OAGH+F,EAf+B,CAAChH,KA9Eb,uBA8FnBgH,EAnB4B,CAAChH,KAhFnB,YAgFoC2D,MAmB5B1C,EAASkG,QAC3BH,EAlBgD,CAAChH,KAhF3B,wBAgFwDoE,MAkBlDnD,EAASmG,aALlC,2CAAP,sDGSiBC,CAAWxG,EAAaC,KAGrCK,WAAY,SAACC,GACT4F,EHHgB,SAAC5F,GAAD,8CAAY,WAAO4F,GAAP,SAAAC,EAAA,6DACpCD,EAASzC,GAAwB,EAAMnD,IADH,kBAGb8F,IAAQ/F,WAAWC,GAHN,OAIR,IAJQ,OAIvBkG,YACLN,EAAS1C,EAAalD,IALM,gDAQhCmG,MAAM,iBAR0B,yBAUhCP,EAASzC,GAAwB,EAAOnD,IAVR,4EAAZ,sDGGPoG,CAAapG,KAG1BE,aAAc,SAACF,GACX4F,EHOkB,SAAC5F,GAC3B,8CAAO,WAAO4F,GAAP,SAAAC,EAAA,6DACHD,EAASzC,GAAwB,EAAMnD,IADpC,SAEgB8F,IAAQ5F,aAAaF,GAFrC,OAG6B,IAH7B,OAGckG,aACLN,EAAS1C,EAAalD,IACtB4F,EAASzC,GAAwB,EAAOnD,KALjD,2CAAP,sDGRiBqG,CAAerG,SAKrB0F,CAETP,G,iBCvGSmB,MAff,SAAgBzE,GAEZ,OACI,4BAAQC,UAAWC,IAAOwE,QACtB,yBAAKjC,IAAKkC,EAAQ,KAAmBC,IAAI,SACzC,yBAAK3E,UAAWC,IAAO2E,YACjB7E,EAAM8E,KAAKC,OAAkD,6BAC3D,2BAAI/E,EAAM8E,KAAKtG,OACf,kBAAC,IAAD,CAAS6D,QAAS,kBAAMrC,EAAMlB,UAAWmB,UAAWC,IAAOpB,OAAQyB,GAAI,UAAvE,aAFkB,kBAAC,IAAD,CAASA,GAAI,UAAb,Y,QCJhClE,EAAe,CACjBE,GAAI,KACJoC,MAAO,KACPH,MAAO,KACPoC,YAAY,EACZmE,QAAQ,GAkBGC,EAfK,WAAmC,IAAlCnI,EAAiC,uDAAzBR,EAAcS,EAAW,uCAClD,OAAQA,EAAOC,MAEX,IAdc,gBAeV,OAAO,2BACAF,GACAC,EAAOmI,SAGlB,QACI,OAAOpI,IAQNqI,EAAc,SAAC3I,EAAIoC,EAAOH,EAAOuG,GAAnB,MAA+B,CAAChI,KA7BrC,gBA6B0DkI,QAAS,CAAC1I,KAAIoC,QAAOH,QAAOuG,YAI/FI,EAAoB,yDAAM,WAAOpB,GAAP,uBAAAC,EAAA,sEAChBzF,IAASC,QADO,OAGX,KAFlBP,EAD6B,QAG1BoG,aAAmB,EACCpG,EAAKA,KAAzB1B,EADkB,EAClBA,GAAIoC,EADc,EACdA,MAAOH,EADO,EACPA,MAChBuF,EAASmB,EAAY3I,EAAIoC,EAAOH,GAAO,KALR,2CAAN,uDC9B3B4G,E,uKAGE,OACI,kBAAC,EAAW3B,KAAKzD,W,GAJC4D,aAwBfE,gBAfS,SAACjH,GACrB,MAAO,CACHiI,KAAMjI,EAAMmI,gBAIO,SAACjB,GACxB,MAAO,CAEHjF,OAAQ,WACJiF,GDiCkB,SAAAA,GAC1BxF,IAASO,SACJf,MAAK,SAAAE,GACsB,IAApBA,EAAKoG,YACLN,EAASmB,EAAY,KAAM,KAAM,MAAM,cChCxCpB,CAA6CsB,G,0DCvBtDC,GAAcC,aAAU,IAmCfzB,eACX0B,aAAU,CAACC,KAAM,UADN3B,EAjCG,SAAC7D,GAIf,OACI,0BAAMyF,SAAUzF,EAAM0F,cAClB,6BACI,kBAACC,GAAA,EAAD,CAAOC,YAAa,QAASpJ,KAAM,QAASqJ,UAAWC,KAAOC,SAAU,CAACV,GAAaW,MAC/EC,UAAW,WAEtB,6BACI,kBAACN,GAAA,EAAD,CAAOC,YAAa,WAAYpJ,KAAM,WAAYqJ,UAAWC,KACtDC,SAAU,CAACV,GAAaW,MAAgBC,UAAW,QAASlJ,KAAM,cAE7E,6BACI,kBAAC4I,GAAA,EAAD,CAAO5I,KAAK,WAAWP,KAAM,aAAcqJ,UAAW,UAD1D,gBAGC7F,EAAMkG,OAAS,yBAAKjG,UAAWC,KAAOiG,kBAClCnG,EAAMkG,OAEX,6BACI,8CCODpC,gBAdS,SAAAjH,GACpB,MAAO,CACHkI,OAAQlI,EAAMmI,YAAYD,WAIP,SAAChB,GACxB,MAAO,CACHtF,OADG,SACIC,GACHqF,EHaY,SAACrF,GAAD,OAAe,SAAAqF,GACnCxF,IAASE,OAAOC,GACXX,MAAK,SAAAE,GACF,GAAwB,IAApBA,EAAKoG,WACLN,EAASoB,SACN,CACH,IAAMxI,EAAUsB,EAAKmI,SAASC,OAAS,EAAIpI,EAAKmI,SAAS,GAAK,aAC1DtJ,EAASwJ,YAAW,QAAS,CAACC,OAAQ5J,IAC1CoH,EAASjH,QGrBJ0J,CAAS9H,QAKfoF,EA/BD,SAAC9D,GAKX,OAAIA,EAAM+E,OACC,kBAAC,IAAD,CAAUxE,GAAI,aAIrB,6BACI,qCACA,kBAAC,GAAD,CAAWkF,SAXF,SAAClG,GACdS,EAAMvB,OAAOc,UCJflD,GAAe,CACjBoK,aAAa,G,mBCLXC,GAAgB,CAClB,CACInK,GAAI,IACJC,KAAM,SACNC,OAAQ,gFAEZ,CAACF,GAAI,IAAKC,KAAM,uCAAUC,OAAQ,0EAClC,CAACF,GAAI,IAAKC,KAAM,6CAAWC,OAAQ,iCACnC,CAACF,GAAI,IAAKC,KAAM,iCAASC,OAAQ,uDAOtBkK,GALQ,WAAoC,IAAnC9J,EAAkC,uDAA1B6J,GAE5B,OAAO7J,G,oBCFL+J,GAAmBjH,OAAOkH,sCAAwChD,IAElEiD,GAAgBC,YAAgB,CAClCC,YAAapK,KACbqK,YAAaC,KACbC,QAASR,GACTnE,UAAW1B,EACXkE,cACAQ,KAAM4B,KACNC,WFVsB,WAAmC,IAAlCxK,EAAiC,uDAAzBR,GAAcS,EAAW,uCACxD,OAAQA,EAAOC,MACX,IAToB,sBAUhB,OAAO,2BACAF,GADP,IAEI4J,aAAa,IAErB,QACI,OAAO5J,MEKfyK,GAAQC,YAAYT,GAAgBF,GAAiBY,YAAgBC,QAEzEC,OAAOC,UAAUL,MAAQA,GA+BVA,UCtCTM,GAAmBjE,IAAMkE,MAAK,kBAAM,iCACpCC,GAAmBnE,IAAMkE,MAAK,kBAAM,iCAIpCE,G,kLAEEtE,KAAKzD,MAAMgI,kB,+BAIX,OAAKvE,KAAKzD,MAAMyG,YAIR,yBAAKxG,UAAU,eACX,kBAAC,GAAD,MACA,kBAAC,EAAD,MACA,yBAAKA,UAAU,uBACX,kBAAC,IAAMgI,SAAP,CAAgBC,SAAU,kBAACxE,EAAA,EAAD,OACtB,kBAAC,IAAD,CAAOyE,KAAK,oBAAoBC,OAAQ,kBAAM,kBAACN,GAAD,SAC9C,kBAAC,IAAD,CAAOK,KAAK,WAAWC,OAAQ,kBAAM,kBAACR,GAAD,SACrC,kBAAC,IAAD,CAAOO,KAAK,SAASC,OAAQ,kBAAM,kBAAC,EAAD,SACnC,kBAAC,IAAD,CAAOD,KAAK,QAAQC,OAAQ,kBAAM,kBAAC,EAAD,SAClC,kBAAC,IAAD,CAAOD,KAAK,YAAYC,OAAQ,kBAAM,kBAAC,EAAD,SACtC,kBAAC,IAAD,CAAOD,KAAK,SAASC,OAAQ,kBAAM,kBAAC,GAAD,YAb5C,kBAAC1E,EAAA,EAAD,CAAWzD,UAAU,a,GAPtB0D,IAAMC,WA+CpByE,GAAcxE,YACdC,aAfoB,SAACjH,GACrB,MAAO,CACH4J,YAAa5J,EAAMwK,WAAWZ,gBAIX,SAAC1C,GACxB,MAAO,CACHiE,cAAe,WACXjE,GHzCyB,SAAAA,GACjC,IAAMuE,EAAUvE,EAASoB,KACzBoD,QAAQC,IAAI,CAACF,IACRvK,MAAK,kBAAMgG,EALsB,CAAChH,KAnBf,mCGmEV8G,CAEhBkE,IAEWU,GAAU,SAACzI,GACpB,OACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAUsH,MAAOA,IACb,kBAACe,GAAD,SCtEhBK,IAASN,OACL,kBAAC,IAAMO,WAAP,KACI,kBAAC,GAAD,OAEJC,SAASC,eAAe,SjBwHtB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBjL,MAAK,SAAAkL,GACJA,EAAaC,gBAEdC,OAAM,SAAAjD,GACLkD,QAAQlD,MAAMA,EAAMvJ,a,gCkBzI5B,sCAWe+G,IARf,SAAmB1D,GACf,OACI,oCACI,yBAAKyC,IAAK4G,S,mBCLtBlN,EAAOC,QAAU,CAAC,YAAc,kCAAkC,MAAQ,4BAA4B,iBAAmB,yC,gCCDzH,oEAAO,IAAM4J,EAAgB,SAAAsD,GACzB,OAAIA,OACA,EAEO,qBAIFhE,EAAY,SAAAe,GAAM,OAAI,SAAAiD,GAC/B,OAAIA,GAASA,EAAMjD,OAASA,EAClB,iBAAN,OAAwBA,EAAxB,iBAEA,K,mBCXRlK,EAAOC,QAAU,CAAC,UAAY,yBAAyB,aAAe,4BAA4B,MAAQ,uB,mBCA1GD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,WAAa,2BAA2B,OAAS,yB,iJCE7FmN,EAAc,SAAC,GAA4B,EAA3BC,MAA4B,IAArBC,EAAoB,EAApBA,KAASzJ,EAAW,gCAGvC0J,EAAYD,EAAKvD,OAASuD,EAAKE,QACrC,OACI,yBAAK1J,UAAWyJ,GAAQ,UAAOxJ,IAAO0J,YAAd,YAA6B1J,IAAOgG,QACxD,6BACKlG,EAAM6J,UAEX,6BACKH,GAAW,8BAAOD,EAAKvD,UAO3B4D,EAAW,SAAC9J,GAAW,IACzBwJ,EAA6BxJ,EAA7BwJ,MAAgBO,GAAa/J,EAAtByJ,KADiB,YACKzJ,EADL,mBAE/B,OACI,kBAACuJ,EAAgBvJ,EACb,8CAAcwJ,EAAWO,MAKxBjE,EAAQ,SAAC9F,GAAW,IACtBwJ,EAA6BxJ,EAA7BwJ,MAAgBO,GAAa/J,EAAtByJ,KADc,YACQzJ,EADR,mBAE5B,OACI,kBAACuJ,EAAgBvJ,EACb,2CAAWwJ,EAAWO,O,8PC/B5BC,EAAW,0BAGXC,EAAc,6BAGd5N,EAAe,CACjB6N,SAAU,CACN,CAAC3N,GAAI,EAAGI,QAAS,mBAAoBwN,MAAO,KAC5C,CAAC5N,GAAI,EAAGI,QAAS,qBAAsBwN,MAAO,KAElDC,QAAS,KACTC,cAAe,MAgDJnD,IA7CQ,WAAmC,IAAlCrK,EAAiC,uDAAzBR,EAAcS,EAAW,uCAErD,OAAQA,EAAOC,MACX,KAAKiN,EACD,IAAMM,EAAU,CACZ/N,GAAI,EAAGI,QAASG,EAAOyN,YAAaJ,MAAO,GAG/C,OAAO,2BACAtN,GADP,IAGIqN,SAAS,GAAD,mBAAMrN,EAAMqN,UAAZ,CAAsBI,MAOtC,IAhCiB,kCAiCb,OAAO,2BACAzN,GADP,IACcuN,QAAStN,EAAOsN,UAIlC,IArCwB,yCAsCpB,OAAO,2BACAvN,GADP,IACcwN,cAAevN,EAAOqC,SAIxC,KAAK8K,EACD,OAAO,2BACApN,GADP,IACcqN,SAAUrN,EAAMqN,SAAS9I,QAAO,SAAAhD,GAAI,OAAIA,EAAK7B,KAAOO,EAAO0N,YAI7E,IA/CoB,qCAgDhB,OAAO,2BAAI3N,GAAX,IAAkBuN,QAAQ,2BAAKvN,EAAMuN,SAAZ,IAAqB1H,OAAQ5F,EAAO4F,WAGjE,QACI,OAAO7F,IAQZ,IAAM4N,EAAuB,SAACF,GAAD,MAAkB,CAACxN,KAAMiN,EAAUO,gBAE1DG,EAAuB,SAACvL,GAAD,MAAa,CAACpC,KAhElB,yCAgEiDoC,WAMpEwL,EAAe,SAACxM,GAAD,8CAAY,WAAM4F,GAAN,eAAAC,EAAA,sEACnBjF,IAAWC,WAAWb,GADH,OAChCF,EADgC,OAEpC8F,EATwC,CAAChH,KAhEpB,kCAgE4CqN,QASzCnM,IAFY,2CAAZ,uDAKf2M,EAAqB,SAACzM,GAAD,8CAAY,WAAM4F,GAAN,eAAAC,EAAA,sEACrBjF,IAAWE,UAAUd,GADA,OACpCgB,EADoC,OAE1C4E,EAAS2G,EAAqBvL,IAFY,2CAAZ,uDAKrB0L,EAAwB,SAAC1L,GAAD,8CAAY,WAAM4E,GAAN,SAAAC,EAAA,sEAC1BjF,IAAWG,aAAaC,GADE,OAErB,IAFqB,OAEpCkF,YACLN,EAAS2G,EAAqBvL,IAHW,2CAAZ,uDAOxB2L,EAAc,SAACC,GAAD,8CAAU,WAAMhH,GAAN,eAAAC,EAAA,sEACZjF,IAAWM,UAAU0L,GADT,OAGA,KAF7B/M,EAD6B,QAGpBC,KAAKoG,YACdN,EAzBqC,CAAChH,KAhElB,qCAgE6C2F,OAyBvC1E,EAASC,KAAKA,KAAKyE,SAJhB,2CAAV,yD","file":"static/js/main.b93127c8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/user.c5e95871.jpeg\";","const ADD_MESSAGE = 'ADD-MESSAGE';\r\n\r\nconst initialState = { // добавляем значение state по умолчанию, оно нужно для инициализации state при запуске приложения. Иначе state будет undefined и наш store не создастся. Детали есть в redux-store\r\n    dialogsData: [\r\n        {\r\n            id: \"1\",\r\n            name: 'Dimych',\r\n            imgSrc: 'https://i.pinimg.com/originals/51/f6/fb/51f6fb256629fc755b8870c801092942.png'\r\n        },\r\n        {\r\n            id: \"2\",\r\n            name: 'Андрей',\r\n            imgSrc: 'https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png'\r\n        },\r\n        {id: \"3\", name: 'Михалыч', imgSrc: 'https://imgur.com/I80W1Q0.png'},\r\n        {id: \"4\", name: 'Витек', imgSrc: 'https://image.freepik.com/free-vector/_9385-36.jpg'}\r\n    ],\r\n\r\n    messagesData: [\r\n        {id: \"1\", message: 'hi'},\r\n        {id: \"1\", message: 'hi how are you'},\r\n        {id: \"1\", message: 'I\\'m fine'},\r\n        {id: \"1\", message: 'Витек'}\r\n    ],\r\n}\r\n\r\n//Reducer - чистая функция, которая принимает state, action и возвращает новое состояние state. Если action.type не удовлетворяет условию, то возвращает переданный state\r\n\r\nconst dialogsReducer = (state = initialState, action) => { //action - объект, у которого как минимум есть type\r\n    switch (action.type) {\r\n\r\n        case ADD_MESSAGE: {\r\n            const stateCopy = {...state}\r\n\r\n            const newMessage = {\r\n                id: \"33\", message: action.newMessageText\r\n            };\r\n            stateCopy.messagesData = [...state.messagesData] //Массив - это тот же объект и он также хранится по ссылке, поэтому мы точно так же должны создать копию этого объекта, чтобы connect мог следить за изменением объекта и сравнивать его новое и старое состояние\r\n            stateCopy.messagesData.push(newMessage);\r\n            return stateCopy;\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default dialogsReducer\r\nexport const addMessageActionCreator = (newMessageText) => ({type: ADD_MESSAGE, newMessageText})\r\n\r\n/*\r\nЗачем мы делаем копию state?\r\nВо первых - копия state нужна нам для ререндера компонента.\r\nСмысл в том, что объекты хранятся в памяти не по значению, а по ссылке и, если мы будем менять state, который мы передали в reducer, то будет меняться и наш первоначальный state.\r\nФункция connect (детали в dialogsContainer) для ререндера должна сравнить 2 состояния объекта: старое и новое, если что-то поменялось, то запустится ререндер объекта.\r\nНо, т.к. state получается один и тот же, что до изменения состояния, что после (т.к. одна и та же ссылка на объект), то перерендер не будет запущен, даже не смотря на то, что по факту мы добавляем новую информацию\r\n\r\nКак решить эту проблему?\r\n\r\nМы делаем копию state, которую передаем в reducer и получаем новую ссылку, в которой будет хранится наш новый объект.\r\nВ дальнейшем connect будет сравнивать первоначальный state и его копию (НО не объект целиком, а его свойства и значения этих свойств) и, если найдет отличия, то запустит перерендер.\r\n\r\nПочему значения свойств? Потому, что 2 объекта никогда не будут равны, если это не хранятся по одной и той же ссылке (другими словами - не один и тот же объект).\r\nА вот значения свойств этих объектов могут быть равны.\r\n\r\nВо вторых.\r\nЕсли мы меняем state, который передаем в функцию, то это нарушает принцип чистых функций\r\nНазывается он - имьютабельность. Мы не имеем права модифицировать входящие параметры напрямую\r\n */","// extracted by mini-css-extract-plugin\nmodule.exports = {\"friend\":\"Friends_friend__3iLqE\"};","module.exports = __webpack_public_path__ + \"static/media/Spinner-1s-200px.9064981b.svg\";","import * as axios from \"axios\";\r\n\r\n//Создаем Data Access Layer - слой доступа к данным\r\n\r\nconst instance = axios.create({ //создаем инстанс нашего запроса. Это функция, которая возвращает нам объект с настройками запроса.\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/', //это значение будет автоматически подставляться в начало url строки (первым параметром, например, перед users?page=.....)\r\n    withCredentials: true,\r\n    headers: { //HEADERS -\r\n        'API-KEY':'2aa9b183-f48f-4118-9c56-db5dfd5a00b4'}, //Все запросы, кроме get требуют ключ доступа.\r\n})\r\n\r\n/*\r\nПосле того, как мы создали инстанс, мы делаем запросы не через axios, а через инстанс,\r\nт.е. не axios.get, а instance.get\r\n */\r\n\r\nexport const usersAPI = {\r\n     getUsers(currentPage, pageSize) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => {\r\n            return response.data //Возвращаем не весь response, а только нуные нам данные. Заголовки, и д.р. - не нужно\r\n        })\r\n    },\r\n    followUser(userId) {\r\n        return instance.post(`follow/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n\r\n    unfollowUser(userId){\r\n        return instance.delete(`follow/${userId}`)\r\n            .then(response => response.data)\r\n    }\r\n\r\n}\r\n\r\nexport const loginAPI = {\r\n    login(){\r\n        return instance.get(`auth/me`)\r\n            .then(response => response.data)\r\n    },\r\n\r\n    signIn(loginData){\r\n        return instance.post('/auth/login', {email: loginData.email, password: loginData.password, rememberMe: loginData.rememberMe})\r\n            .then(response=>response.data)\r\n    },\r\n\r\n    logout(){\r\n        return instance.delete('/auth/login')\r\n            .then(response=>response.data)\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n    setProfile(userId){\r\n        return instance.get(`profile/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    getStatus(userId){\r\n        return instance.get(`profile/status/${userId}`)\r\n            .then(response=>response.data)\r\n    },\r\n    updateStatus(status){\r\n        return instance.put(`profile/status`, {status: status}) //вторым параметром в put запросе можно отправлять тело запроса. В конфигурации api заложено, что в теле запроса должен прийти объект со свойством status.\r\n            .then(response=>response.data)\r\n    },\r\n    savePhoto(photoFile){\r\n        let formData = new FormData()\r\n        formData.append('image', photoFile)\r\n        return instance.put('profile/photo', formData, {\r\n            headers: {\r\n                'Content-type': 'multipart/form-data'\r\n            }\r\n        } )\r\n    }\r\n}","module.exports = __webpack_public_path__ + \"static/media/logo.b4b06117.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Nav_nav__2KbBC\",\"item\":\"Nav_item__2_IHf\",\"activeLink\":\"Nav_activeLink__2kKey\",\"friends\":\"Nav_friends__3JIqF\"};","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport styles from './Nav.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Friends from \"./Friends/Friends\";\r\n\r\nfunction Nav(props){\r\n\r\n    return (<nav className={styles.nav}>\r\n        <ul>\r\n            <li className={styles.item}><NavLink activeClassName={styles.activeLink} to=\"/profile\">Profile</NavLink></li>\r\n            <li className={styles.item}><NavLink activeClassName={styles.activeLink} to=\"/dialogs\">Dialogs</NavLink></li>\r\n            <li className={styles.item}><NavLink activeClassName={styles.activeLink} to=\"/users\">Users</NavLink></li>\r\n            <li className={styles.item}><NavLink activeClassName={styles.activeLink} to=\"/news\">News</NavLink></li>\r\n            <li className={styles.item}><NavLink activeClassName={styles.activeLink} to=\"/settings\">Settings</NavLink></li>\r\n        </ul>\r\n    </nav>)\r\n}\r\n\r\n//Navlink - встроенная в react компонента. Изменяет url в браузере на значение, которое мы указываем в to={то, на что изменится текст в строке браузера}\r\n//При компиляции Navlink меняется на тег <a> (ссылка), но при этом у нее отключено дефолтное поведение по редиректу на другую страницу. Остается лишь изменение строки в браузере без перехода.\r\n//Navlink не меняет содержимое страницы. Navlink отвечает только за изменение текста в строке браузера.\r\n//За изменение содержимого страницы будет следить другая компонента - Route.\r\n\r\nexport default Nav;\r\n\r\n","import React from \"react\";\r\n\r\nconst Settings = () => {\r\n    return (\r\n        <div>Settings</div>\r\n    )\r\n}\r\n\r\nexport default Settings;","import React from \"react\";\r\n\r\n\r\nconst News = () => {\r\n    return (\r\n        <div>News</div>\r\n    )\r\n}\r\n\r\nexport default News;","import {usersAPI as userAPI} from \"../api/api\";\r\n\r\nconst CHANGE_FOLLOW = 'CHANGE_FOLLOW';\r\nconst SET_USERS = 'SET_USERS'\r\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE'\r\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT'\r\nconst SET_PREVIOUS_PAGE = 'SET_PREVIOUS_PAGE'\r\nconst SET_NEXT_PAGE = 'SET_NEXT_PAGE'\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE_IS_FETCHING'\r\nconst TOGGLE_IS_FOLLOWING = 'TOGGLE_IS_FOLLOWING'\r\n\r\nconst initialState = {\r\n    users: [],\r\n    pageSize: 3, //Значения нужны для определения постраничного вывода.\r\n    totalUsersCount: null,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: []\r\n\r\n} // добавляем значение state по умолчанию, оно нужно для инициализации state при запуске приложения. Иначе state будет undefined и наш store не создастся\r\n\r\nconst usersReducer = (state = initialState, action) => { //Reducer - функция, через которую идет модификация state\r\n    switch (action.type) {\r\n        case CHANGE_FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(user => user.id === action.userID ? {...user, followed: !user.followed} : user) //Через users.map() делаем глубокую копию объектов, которые находятся в массиве.\r\n                //нам не нужно делать копию каждого объекта, а только того, который мы будем изменять. Как понять, какой объект изменяем? Для этого в action нам будет приходить свойство userID\r\n                // по значению этого свойства мы и узнаем, копию какго элемента массива объектов мы должны сделать.\r\n            }\r\n\r\n        case SET_USERS:\r\n            return {\r\n                ...state,\r\n                users: [...action.users] //Добавляем в копию массива\r\n            }\r\n\r\n        case SET_CURRENT_PAGE:\r\n            return {\r\n                ...state, currentPage: action.currentPage\r\n            }\r\n\r\n        case SET_PREVIOUS_PAGE:\r\n            if (state.currentPage !== 1) {\r\n                return {\r\n                    ...state, currentPage: state.currentPage - 1\r\n                }\r\n            } else {\r\n                return state\r\n            }\r\n\r\n        case SET_NEXT_PAGE:\r\n            return {\r\n                ...state, currentPage: state.currentPage + 1\r\n            }\r\n\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return {\r\n                ...state, totalUsersCount: action.count\r\n            }\r\n\r\n        case TOGGLE_IS_FETCHING:\r\n            return {\r\n                ...state, isFetching: !state.isFetching\r\n            }\r\n\r\n        case TOGGLE_IS_FOLLOWING:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching ?\r\n                    [...state.followingInProgress, action.userId] :\r\n                    state.followingInProgress.filter(id => id != action.userId)\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default usersReducer\r\n\r\n///Action Creators///\r\nexport const changeFollow = (userID) => ({type: CHANGE_FOLLOW, userID});\r\nexport const setUsers = (users) => ({type: SET_USERS, users}); //Это AC будет формировать action по загрузке пользователей\r\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage})\r\nexport const setTotalUsersCount = (totalUsersCount) => ({type: SET_TOTAL_USERS_COUNT, count: totalUsersCount});\r\nexport const toggleIsFetching = () => ({type: TOGGLE_IS_FETCHING})\r\nexport const setPreviousPage = () => ({type: SET_PREVIOUS_PAGE});\r\nexport const setNextPage = () => ({type: SET_NEXT_PAGE});\r\nexport const toggleFollowingProgress = (isFetching, userId) => {\r\n    return {\r\n        type: TOGGLE_IS_FOLLOWING, isFetching, userId\r\n    }\r\n}\r\n\r\n///Thunk///\r\n\r\nexport const getUsersTC = (currentPage, pageSize) => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleIsFetching())\r\n        const response = await userAPI.getUsers(currentPage, pageSize)\r\n        dispatch(toggleIsFetching())\r\n        dispatch(setUsers(response.items))\r\n        dispatch(setTotalUsersCount(response.totalCount))\r\n\r\n    }\r\n}\r\n\r\nexport const followUserTC = (userId) => async (dispatch) => {\r\n    dispatch(toggleFollowingProgress(true, userId))\r\n    try {\r\n        const data = await userAPI.followUser(userId)\r\n        if (data.resultCode === 0) {\r\n            dispatch(changeFollow(userId))\r\n        }\r\n    } catch {\r\n        alert('Please, login')\r\n    } finally {\r\n        dispatch(toggleFollowingProgress(false, userId))\r\n    }\r\n}\r\n\r\nexport const unfollowUserTC = (userId) => {\r\n    return async (dispatch) => {\r\n        dispatch(toggleFollowingProgress(true, userId))\r\n        const data = await userAPI.unfollowUser(userId)\r\n                if (data.resultCode === 0) {\r\n                    dispatch(changeFollow(userId))\r\n                    dispatch(toggleFollowingProgress(false, userId))\r\n                }\r\n    }\r\n}","import React, {useEffect, useState} from \"react\";\r\nimport styles from \"./Users.module.css\";\r\nimport userPhoto from \"../../assets/img/user.jpeg\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n\r\nconst Users = (props) => {\r\n\r\n    const [curPage, setCurPage] = useState(1)\r\n\r\n    useEffect(()=>{\r\n        if (props.currentPage>=10){\r\n            setCurPage(props.currentPage - props.currentPage%10)\r\n        }\r\n    }, [props.currentPage])\r\n\r\n\r\n    const pagesCount = Math.ceil(props.totalUsersCount / props.pageSize);\r\n    const pages = []\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n\r\n    const page = pages.slice(curPage - 1, curPage + 10).map(page => {\r\n        return <span className={props.currentPage === page ? styles.selectedPage : null} id={page} key={page}\r\n                     onClick={() => props.setPage(page)}>{page}</span>\r\n    })\r\n\r\n\r\n    const userItem = props.usersPage.map(user =>\r\n        <div key={user.id}>\r\n            <div>\r\n            <span>\r\n                <div>\r\n                    <NavLink to={`/profile/${user.id}`}>\r\n                    <img src={user.photos.small ? user.photos.small : userPhoto} className={styles.userPhoto}/>\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                   <button disabled={props.followingInProgress.some(id => id === user.id)}\r\n                           onClick={() => {\r\n                               if (!user.followed) {\r\n                                   props.followUser(user.id)\r\n                               } else if (user.followed) {\r\n                                   props.unfollowUser(user.id)\r\n                               }\r\n                           }}\r\n                           id={user.id}>\r\n                        {user.followed && 'unfollow'}\r\n                       {!user.followed && 'follow'}\r\n                    </button>\r\n                </div>\r\n            </span>\r\n                <span>\r\n                    <div>{user.name}</div>\r\n                    <div>{user.status}</div>\r\n                </span>\r\n                <span>\r\n                    <div>{'user.location.country'}</div>\r\n                    <div></div>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <div className={styles.pages}>\r\n                <div>\r\n                    {props.currentPage!== 1 && <span onClick={() => props.setPreviousPage()}>Previous Page</span>}\r\n                    {props.currentPage>= 11 && '...'}\r\n                    {page}\r\n                    ...\r\n                </div>\r\n                <span onClick={() => props.setNextPage()}>Next Page</span>\r\n            </div>\r\n            {userItem}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users\r\n\r\n","import {createSelector} from \"reselect\";\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getUsers = (state) => {\r\n    return state.usersPage.users\r\n}\r\n\r\n/*\r\nexport const getUserSupSel = createSelector(getUsers, getIsFetching, (users, fetching)=> {\r\n    return users.filter(u=>true)\r\n})\r\n */\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress\r\n}","import React from \"react\";\r\nimport {\r\n    followUserTC, getUsersTC,\r\n    setCurrentPage, setNextPage, setPreviousPage, unfollowUserTC\r\n} from \"../../redux/users-reducer\";\r\nimport {connect} from \"react-redux\";\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {compose} from \"redux\";\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsers, getUserSupSel\r\n} from \"../../redux/user-selectors\";\r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n    componentDidMount() {\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize)\r\n    }\r\n\r\n    /* - было до Thunk\r\n    componentDidMount() {\r\n        this.props.toggleIsFetching()\r\n        userAPI.getUsers(this.props.currentPage, this.props.pageSize)\r\n            .then(response => {\r\n                this.props.toggleIsFetching()\r\n                this.props.setUsers(response.items);\r\n                this.props.setTotalUsersCount(response.totalCount)\r\n            })\r\n    }\r\n     */\r\n\r\n    setPage = (pageNumber) => {\r\n        this.props.setCurrentPage(pageNumber)\r\n        this.props.getUsers(pageNumber, this.props.pageSize)\r\n    }\r\n\r\n    setNextPage = () => {\r\n        this.props.setNextPage()\r\n        this.props.getUsers(this.props.currentPage + 1, this.props.pageSize)\r\n    }\r\n\r\n    setPreviousPage = () => {\r\n        this.props.setPreviousPage()\r\n        this.props.getUsers(this.props.currentPage - 1, this.props.pageSize)\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader/> :\r\n                <Users totalUsersCount={this.props.totalUsersCount}\r\n                       pageSize={this.props.pageSize}\r\n                       setPage={this.setPage}\r\n                       usersPage={this.props.usersPage}\r\n                       currentPage={this.props.currentPage}\r\n                       setNextPage={this.setNextPage}\r\n                       setPreviousPage={this.setPreviousPage}\r\n                       followingInProgress={this.props.followingInProgress}\r\n                       followUser={this.props.followUser}\r\n                       unfollowUser={this.props.unfollowUser}\r\n                />}\r\n        </>\r\n    }\r\n}\r\n\r\n/*\r\nconst mapStateToProps = (state) => { // connect (функция в самом низу) позволяет нам автоматически вытаскивать state из store. Т.е. он неявно вызывает store.getState() и возвращает нам актуальный state\r\n    return {\r\n        usersPage: state.usersPage.users, //Сюда мы передаем то, что будет указано у нас в качестве пропсов, которые мы передаем в презентационную компоненту. Т.е. в итоге мы полчим презентационную компоненту с пропсами <Dialogs dialogsPage={state.dialogsPage} />\r\n        pageSize: state.usersPage.pageSize,\r\n        totalUsersCount: state.usersPage.totalUsersCount,\r\n        currentPage: state.usersPage.currentPage,\r\n        isFetching: state.usersPage.isFetching,\r\n        followingInProgress: state.usersPage.followingInProgress\r\n    }\r\n};\r\n */\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        usersPage: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n\r\n        setCurrentPage: (currentPage) => {\r\n            dispatch(setCurrentPage(currentPage))\r\n        },\r\n        setNextPage: () => {\r\n            dispatch(setNextPage())\r\n        },\r\n        setPreviousPage: () => {\r\n            dispatch(setPreviousPage())\r\n        },\r\n\r\n        getUsers: (currentPage, pageSize) => {\r\n            dispatch(getUsersTC(currentPage, pageSize))\r\n        },\r\n\r\n        followUser: (userId) => {\r\n            dispatch(followUserTC(userId))\r\n        },\r\n\r\n        unfollowUser: (userId) => {\r\n            dispatch(unfollowUserTC(userId))\r\n        }\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n    )(UsersContainer)\r\n\r\n/*\r\n//mapDispatchToProps мы можем заменить объектом и connect сам создаст функции обертки, куда будут заложены наши action-creator-ы\r\n\r\nexport default connect(mapStateToProps, {\r\n    changeFollow,\r\n    setUsers,\r\n    setCurrentPage,\r\n    setNextPage,\r\n    setPreviousPage,\r\n    setTotalUsersCount,\r\n    toggleIsFetching,\r\n    toggleFollowingProgress\r\n})(UsersContainer)\r\n\r\n */\r\n//С помощью функции connect мы можем создать контейнерную компоненту.\r\n//Функция connect принимает в себя 2 параметра, которые представляют собой функции\r\n//Первая функция принимает в качестве параметров state (Обычно эту функцию называют mapStateToProps)\r\n//Вторая функция - dispatch (Обычно называют mapDispatchToProps)\r\n//В результате connect вернет нам функцию, которая в качестве параметра принимает в себя название компоненты,\r\n//вокруг которой мы хотим создать контейнерную компоненту.\r\n\r\n/*\r\nПомимо всего этого connect создает свой собственный subscribe, который будет следить, нужно ли компоненте перерисовываться или нет.\r\nКаждый раз, когда происходят изменения в state запускается функция mapStateToProps и формируется новый объект.\r\nновый объект сравнивается со старым объектом (его внутренние составляющие, т.к. объект не может быть равен другому объекту).\r\nЕсли ичего не меняется, то и компонента не перерисовывается\r\n */","import React from \"react\";\r\nimport styles from \"./Header.module.css\"\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nfunction Header(props) {\r\n\r\n    return (\r\n        <header className={styles.header}>\r\n            <img src={require('./img/logo.png')} alt=\"LOGO\"/>\r\n            <div className={styles.loginBlock}>\r\n                {!props.auth.isAuth ? <NavLink to={'/login'}>Login</NavLink> : <div>\r\n                    <p>{props.auth.login}</p>\r\n                    <NavLink onClick={() => props.logout()}  className={styles.logout} to={'/login'}> Logout </NavLink>\r\n                </div>\r\n                }\r\n            </div>\r\n        </header>)\r\n}\r\n\r\nexport default Header;","import {loginAPI} from \"../api/api\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst SET_USER_DATA = 'SET_USER_DATA';\r\nconst CLEAR_USER_DATA = 'CLEAR_USER_DATA'\r\n\r\nconst initialState = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isFetching: false,\r\n    isAuth: false\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n\r\n        default:\r\n            return state\r\n\r\n    }\r\n}\r\n\r\nexport default authReducer\r\n\r\n///Action Creators///\r\nexport const setUserData = (id, email, login, isAuth) => ({type: SET_USER_DATA, payload: {id, email, login, isAuth}})\r\n\r\n///Thunks///\r\n\r\nexport const getAuthUserDataTC = () => async (dispatch) => {\r\n    const data = await loginAPI.login()\r\n\r\n    if (data.resultCode === 0) {\r\n        let {id, email, login} = data.data\r\n        dispatch(setUserData(id, email, login, true)) //Dispatch по умолчанию возвращает нам Promise\r\n    }\r\n}\r\n\r\nexport const signInTC = (loginData) => dispatch => {\r\n    loginAPI.signIn(loginData)\r\n        .then(data => {\r\n            if (data.resultCode === 0) {\r\n                dispatch(getAuthUserDataTC())\r\n            } else {\r\n                const message = data.messages.length > 0 ? data.messages[0] : 'Some Error'\r\n                let action = stopSubmit('login', {_error: message}) //actionCreator reduxform В stopSubmit мы передаем 2 параметра: 1 - название формы в нашем state-e (это название мы передаем в HOC reduxForm, когда оборачиваем нашу компоненту), вторым параметром - объект, в котором мы указываем проблемные свойства\r\n                dispatch(action)  //{_error:'Email is wrong'} свойство _error - показывает общую ошибку для всей формы, значение - описание этой ошибки. Описание ошибки попадает в качестве пропсов в валидируемую форму. Т.е. props.error будет выводить описание полученной ошибки.\r\n            }\r\n        })\r\n}\r\n\r\nexport const logoutTC = () => dispatch => {\r\n    loginAPI.logout()\r\n        .then(data => {\r\n            if (data.resultCode === 0) {\r\n                dispatch(setUserData(null, null, null, false))\r\n            }\r\n        })\r\n}","import React, {Component} from \"react\";\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {logoutTC} from \"../../redux/auth-reducer\";\r\n\r\n\r\nclass HeaderContainer extends Component { //Контейнерная компонента дает логику презентационной компоненте\r\n\r\n    render() {\r\n        return (\r\n            <Header {...this.props}/>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        auth: state.authReducer\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n        logout: () => {\r\n            dispatch(logoutTC())\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderContainer)","import React from \"react\";\r\nimport {compose} from \"redux\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {Input} from \"../common/FormsControl/FormsControls\";\r\nimport {maxLength, requiredField} from \"../../utils/validators/validators\";\r\nimport styles from '../common/FormsControl/FormsControl.module.css'\r\n\r\nconst maxLength30 = maxLength(30)\r\n\r\nconst LoginForm = (props) => {\r\n    //props.handleSubmit предотвращает стандартное поведение button-a (перезагрузку страницы и отправку данных формы. Также этот коллбэк собирает все данные формы в один объект и отправляет их в\r\n    //качестве аргумента в props.onSubmit(formData)\r\n    //функцию props.onSubmit мы должны передать из верхней компоненты в качестве отдельного пропса, поэтому логику обработки формы мы будем держать во внешнем мире\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field placeholder={'email'} name={'email'} component={Input} validate={[maxLength30, requiredField]}\r\n                       typeField={'Input'}/>\r\n            </div>\r\n            <div>\r\n                <Field placeholder={'Password'} name={'password'} component={Input}\r\n                       validate={[maxLength30, requiredField]} typeField={'Input'} type={'password'}/>\r\n            </div>\r\n            <div>\r\n                <Field type=\"checkbox\" name={'rememberMe'} component={'input'}/> Remember me\r\n            </div>\r\n            {props.error && <div className={styles.formSummaryError}>\r\n                {props.error}\r\n            </div>}\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\n/*\r\nconst ReduxLoginForm = reduxForm({form:'login'})(LoginForm)\r\nexport default ReduxLoginForm\r\n\r\n */\r\n\r\nexport default compose(\r\n    reduxForm({form: 'login'}) //reduxForm возвращает нам hoc. Для настройки hoc-a мы должны передать в функцию reduxForm объект со свойством form, значением которого будет название обрабатываемой формы. Оно должно быть уникально\r\n)(LoginForm) //когда мы обернем нашу форму hoc-om, который вернет reduxForm, то обернутой компоненте в пропсы поступит много параметров, нам интересен handleSubmit.\r\n","import React from \"react\";\r\nimport LoginForm from \"./LoginForm\";\r\nimport {signInTC} from \"../../redux/auth-reducer\";\r\nimport {connect} from \"react-redux\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nconst Login = (props) => {\r\n    const onSubmit = (formData) => {\r\n        props.signIn(formData)\r\n    }\r\n\r\n    if (props.isAuth){\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Login</h1>\r\n            <LoginForm onSubmit={onSubmit}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isAuth: state.authReducer.isAuth\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signIn(loginData) {\r\n            dispatch(signInTC(loginData))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\r\n\r\n","import {getAuthUserDataTC} from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS'\r\n\r\nconst initialState = {\r\n    initialized: false\r\n}\r\n\r\n\r\nexport const appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const initializingSuccess = () => ({type: INITIALIZED_SUCCESS})\r\n\r\nexport const initializeAppTC = () => dispatch => {\r\n    const promise = dispatch(getAuthUserDataTC()) /// !!! getAuthUserDataTC() вернул нам Promise (точнее не сам getAuthReducer, а dispatch(setUserData()), поэтому мы можем делать асинхронные операции\r\n    Promise.all([promise]) // Promise.all = передаем массив, состоящий из промисов. Пока все промисы не выполнятся, то дальнейшие операции не пойдут\r\n        .then(() => dispatch(initializingSuccess()))\r\n}","const initiateState = [\r\n    {\r\n        id: \"1\",\r\n        name: 'Dimych',\r\n        imgSrc: 'https://i.pinimg.com/originals/51/f6/fb/51f6fb256629fc755b8870c801092942.png'\r\n    },\r\n    {id: \"2\", name: 'Андрей', imgSrc: 'https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png'},\r\n    {id: \"3\", name: 'Михалыч', imgSrc: 'https://imgur.com/I80W1Q0.png'},\r\n    {id: \"4\", name: 'Витек', imgSrc: 'https://image.freepik.com/free-vector/_9385-36.jpg'}]\r\n\r\nconst sidebarReducer = (state = initiateState, action) => {\r\n\r\n    return state\r\n}\r\n\r\nexport default sidebarReducer","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport sidebarReducer from \"./sidebar-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport thunk from \"redux-thunk\";\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport {appReducer} from \"./app-reducer\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\nconst reducersButch = combineReducers({ //Склеиваем наши reducers в одну кучу\r\n    dialogsPage: dialogsReducer,  //Название свойства - это компонента в _state. Значение - reducer, который отвечает за обработку этой страницы.\r\n    profilePage: profileReducer,\r\n    sideBar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    authReducer, //можно сразу же использовать название reducer-a\r\n    form: formReducer, //Для reducer-a redux-form свойство должно быть указано как form, т.к. в дальнейшем эта библиотека будет искать именно его\r\n    appReducer\r\n})\r\n\r\nlet store = createStore(reducersButch,  composeEnhancers(applyMiddleware(thunk)))\r\n\r\nWindow.prototype.store = store\r\n\r\n//Создаем Store. getState, dispatch, callSubscriber - все это уже будет сидеть внутри store и будет его внутренними методами.\r\n//Автоматически создается state, который будет включать в себя свойства, которые мы передаем в reducersButch.\r\n/*\r\nТ.е. сейчас мы сделали:\r\nstore = {\r\n    state: {\r\n        dialogsPage: ...,\r\n        profilePage: ...\r\n        и дальнейшее перечисление свойств объекта, который мы передаем в combineReducers\r\n    },\r\n    dispatch: {\r\n    this.state.profilePage = profileReducer(this.state.profilePage, action);\r\n    this.state.dialogsPage = dialogsReducer(this.state.dialogsPage, action);\r\n    и д.р.....\r\n    },\r\n    getState(){...},\r\n    callSubscriber(){...} и д.р.\r\n\r\n}\r\nПроблем в том, что наши свойства (dialogsPage, profilePage и т.д.) не имеют начальных значений. Поэтому начальное значение мы должны указать в соответсвющих Resucer-ax\r\n(для dialogPage указываем значение state в dialogReducer и т.д.).\r\nЧто будет происходить? При вызове функции createStore наш Redux начинает отправлять всем reducer-am по порядку внутренние action-s.\r\nТ.к. action.type, который отправляет Redux не будет найден, то reducer вернет значение state, который мы указываем в качестве initial state у каждого reducer-a.\r\nТаким образом redux склеит наш общий state из кусочков initialState у каждого из reducer-oв.\r\n\r\nИменно поэтому для каждой страницы мы должны создавать свой собственный reducer.\r\n\r\n */\r\n\r\nexport default store","import React from 'react';\r\nimport './App.css'\r\nimport Nav from \"./components/nav/Nav\";\r\nimport Settings from \"./components/settings/Settings\";\r\nimport News from \"./components/news/News\";\r\nimport {BrowserRouter, HashRouter, Route} from \"react-router-dom\"; //Используем browserRouter\r\nimport UsersContainer from \"./components/Users/UsersContainer\";\r\nimport HeaderContainer from \"./components/header/HeaderContainer\";\r\nimport LoginPage from \"./components/Login/Login\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport {initializeAppTC} from \"./redux/app-reducer\";\r\nimport Preloader from \"./components/common/Preloader/Preloader\";\r\nimport store from \"./redux/redux-store\";\r\n\r\n//import DialogsContainer from \"./components/dialogs/DialogsContainer\";\r\n//import ProfileContainer from \"./components/profile/ProfileContainer\";\r\nconst DialogsContainer = React.lazy(() => import('./components/dialogs/DialogsContainer')) //React.lazy - позволяет нам загружать страницы не сразу, а только по мере обращения к ним\r\nconst ProfileContainer = React.lazy(() => import('./components/profile/ProfileContainer')) //Компоненту, которую мы \"лениво\" загружаем нужно обернуть в <React.Suspense fallback={<div>Loading...</div>}>\r\n    //В fallback мы пишем компоненту (иили просто какой-либо текст или div или страницу), которая будет показываться, пока идет загрузка компоненты\r\n    //Можно обернуть сразу несколько компонент\r\n\r\nclass App extends React.Component {\r\n    componentDidMount() {\r\n        this.props.initializeApp() //Делаем инициализацию приложения, чтобы все нужные пропсы пришли до отрисовки приложения\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.initialized) {\r\n            return <Preloader className='full'/>\r\n        } else {\r\n            return (\r\n                <div className=\"app-wrapper\">\r\n                    <HeaderContainer/>\r\n                    <Nav/>\r\n                    <div className=\"app-wrapper-content\">\r\n                        <React.Suspense fallback={<Preloader/>}>\r\n                            <Route path='/profile/:userId?' render={() => <ProfileContainer/>}/>\r\n                            <Route path='/dialogs' render={() => <DialogsContainer/>}/>\r\n                            <Route path='/users' render={() => <UsersContainer/>}/>\r\n                            <Route path='/news' render={() => <News/>}/>\r\n                            <Route path='/settings' render={() => <Settings/>}/>\r\n                            <Route path='/login' render={() => <LoginPage/>}/>\r\n                        </React.Suspense>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\n//Компонента Route - встроенная react компонента. Она следит за изменением url и, если url изменился, то отображает компоненту, которую мы указываем в render\r\n//Как именно меняется браузерная строка для Route не важно. Важно лишь то, что она изменилась. Если Адресная строка изменилась и больше не соответствует значению render,\r\n//то route уничтожает информацию, которую мы отображали ранее\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        initialized: state.appReducer.initialized\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        initializeApp: () => {\r\n            dispatch(initializeAppTC())\r\n        }\r\n    }\r\n}\r\n\r\nlet ComposedApp = compose(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n)(App)\r\n\r\nexport const MainApp = (props) => {\r\n    return (\r\n        <HashRouter>\r\n            <Provider store={store}>\r\n                <ComposedApp/>\r\n            </Provider>\r\n        </HashRouter>)\r\n}\r\n","import * as serviceWorker from './serviceWorker';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport {MainApp} from './App';\r\n\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <MainApp/>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n)\r\n\r\n/*\r\nstore.subscribe(() => {\r\n    reRenderDOM()\r\n}) - с введением connect стало неактуально\r\n\r\n */\r\n\r\n/*\r\n<Provider store={store}>\r\n   <App/>\r\n</Provider> // - Оборачиваем компоненту Provider-om, таким образом то, что мы передаем в провайдер (store={store}) будет доступно для всех дочерних компонент.\r\n */\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import React from \"react\";\r\nimport preloader from \"../../../assets/img/Spinner-1s-200px.svg\";\r\n\r\nfunction Preloader(props) {\r\n    return (\r\n        <>\r\n            <img src={preloader}/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Preloader","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControl_formControl__14JJY\",\"error\":\"FormsControl_error__12-sw\",\"formSummaryError\":\"FormsControl_formSummaryError__21I_j\"};","export const requiredField = value => { // в value нам будут приходить значания textarea или input-a, куда мы вводим текст\r\n    if (value) {\r\n        return undefined\r\n    } else {\r\n        return 'Field is required'\r\n    }\r\n}\r\n\r\nexport const maxLength = length => value => { //Создаем замыкание для создания валидации различных maxLength. Для создания нужной maxLength создаем переменную за пределами компоненты. Эта переменная будет равна вызову функции с нужным нам параметром\r\n    if (value && value.length > length){\r\n        return `Max length is ${length} symbols`\r\n    } else {\r\n        return undefined\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__1CfP6\",\"selectedPage\":\"Users_selectedPage__3GU18\",\"pages\":\"Users_pages__1wAue\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2lDem\",\"loginBlock\":\"Header_loginBlock__3A5kA\",\"logout\":\"Header_logout__3A-tt\"};","import React from \"react\";\r\nimport styles from \"./FormsControl.module.css\"\r\n\r\nconst FormControl = ({input, meta, ...props}) => { //Что сделали с пропсами? При передаче компоненты в свойсво component компоненты Field в переданную компоненту (TextArea)\r\n    //приходят объект props, в котором есть свойства input и meta. Мы деструктуризировали наши пропсы и обозначили переменные, которые в дальнейшем передали в TextArea для обработки\r\n    //...props - будет включать в себя все пропсы, за исключением input и meta\r\n    const hasError = (meta.error && meta.touched)\r\n    return (\r\n        <div className={hasError && `${styles.formControl} ${styles.error}`}>\r\n            <div>\r\n                {props.children}\r\n            </div>\r\n            <div>\r\n                {hasError &&<span>{meta.error}</span>}\r\n            </div>\r\n        </div>\r\n    )\r\n    //{...props} - дальнейшая деструктуризация для того, чтобы мы могли прокинуть отдельные пропсы в компоненту (такие как placeholder и д.р)\r\n}\r\n\r\nexport const Textarea = (props) => {\r\n    const {input, meta, ...restProps} = props\r\n    return (\r\n        <FormControl {...props}>\r\n            <textarea {...input} {...restProps}/>\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nexport const Input = (props) => {\r\n    const {input, meta, ...restProps} = props\r\n    return (\r\n        <FormControl {...props}>\r\n            <input {...input} {...restProps}/>\r\n        </FormControl>\r\n    )\r\n}","import {profileAPI} from \"../api/api\";\r\n\r\nconst ADD_POST = '@@auth-reducer/ADD-POST';\r\nconst SET_USER_PROFILE = '@@auth-reducer/SET_USER_PROFILE';\r\nconst SET_USER_PROFILE_STATUS = '@@auth-reducer/SET_USER_PROFILE_STATUS'\r\nconst DELETE_POST = '@@auth-reducer/DELETE_POST'\r\nconst SAVE_PHOTOS_SUCCESS = '@@auth-reducer/SAVE_PHOTOS_SUCCESS'\r\n\r\nconst initialState = {\r\n    postData: [\r\n        {id: 1, message: 'Hi, how are you?', likes: 300},\r\n        {id: 2, message: \"It's my first post\", likes: 20}\r\n    ],\r\n    profile: null,\r\n    profileStatus: null\r\n} // добавляем значение state по умолчанию, оно нужно для инициализации state при запуске приложения. Иначе state будет undefined и наш store не создастся\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case ADD_POST: {\r\n            const newPost = {\r\n                id: 3, message: action.newPostText, likes: 0\r\n            };\r\n\r\n            return {\r\n                ...state, //делаем спред-оператором поверхностную копию объекта. Теперь мы можем переопределять примитивные значения (такие, как newPostText). При этом\r\n                //мы также получаем в этом массиве и другие объекты, но они не будут представлять собой копию, т.к. хранятся по ссылке.\r\n                postData: [...state.postData, newPost], //Тут мы смотрим, что конкретно будет изменять наш Reducer, основываясь на action.Type. Конкретно в этом случае мы добавляем пост, потому логично, что будет меняться массив с постами.\r\n                //Для того, чтобы мы могли отследить изменения объекта, делаем копию массива PostData и в новый массив мы добавляем newPostText (то же, что и arr.push(newPostText))\r\n                //Теперь у нас есть копия массива PostData, однако элементы этого массива также представляют собой объекты.\r\n                //Копировать конкретно эти объекты нам не требуется, т.к. мы не предполагаем их изменения. Но, если, например, у нас добавится функционал по редактированию постов, то мы должны будем сделать копию и этих постов.\r\n            }\r\n        }\r\n\r\n        case SET_USER_PROFILE: {\r\n            return {\r\n                ...state, profile: action.profile\r\n            }\r\n        }\r\n\r\n        case SET_USER_PROFILE_STATUS: {\r\n            return {\r\n                ...state, profileStatus: action.status\r\n            }\r\n        }\r\n\r\n        case DELETE_POST: {\r\n            return {\r\n                ...state, postData: state.postData.filter(post => post.id !== action.postId)\r\n            }\r\n        }\r\n\r\n        case SAVE_PHOTOS_SUCCESS: {\r\n            return {...state, profile: {...state.profile, photos: action.photos}}\r\n        }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default profileReducer\r\n\r\n\r\n///Action Creators///\r\nexport const addPostActionCreator = (newPostText) => ({type: ADD_POST, newPostText});\r\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile})\r\nexport const setUserProfileStatus = (status) => ({type: SET_USER_PROFILE_STATUS, status})\r\nexport const deletePost = (postId) => ({type: DELETE_POST, postId})\r\nexport const savePhotoSuccess = (photos) => ({type: SAVE_PHOTOS_SUCCESS, photos})\r\n\r\n///Thunks///\r\n\r\nexport const setProfileTC = (userId) => async dispatch => {\r\n    let data = await profileAPI.setProfile(userId)\r\n    dispatch(setUserProfile(data))\r\n}\r\n\r\nexport const getProfileStatusTC = (userId) => async dispatch => {\r\n    const status = await profileAPI.getStatus(userId)\r\n    dispatch(setUserProfileStatus(status))\r\n}\r\n\r\nexport const updateProfileStatusTC = (status) => async dispatch => {\r\n    const data = await profileAPI.updateStatus(status)\r\n    if (data.resultCode === 0) {\r\n        dispatch(setUserProfileStatus(status))\r\n    }\r\n}\r\n\r\nexport const savePhotoTC = (file) => async dispatch => {\r\n    let response = await profileAPI.savePhoto(file)\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data.photos))\r\n    }\r\n}"],"sourceRoot":""}